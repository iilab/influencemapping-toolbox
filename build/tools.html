<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Tools - Influence Mapping Toolbox</title>
    <meta name="author" content="Jun Matsushita" />
    <meta name="description" content="" />
    <meta name="keywords" content="influence mapping" />

    <link href="/influencemapping-toolbox/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/influencemapping-toolbox/assets/css/clean-blog.min.css" rel="stylesheet">
    <link href='/influencemapping-toolbox/assets/css/font.css' rel='stylesheet' type='text/css'>
    <link href='/influencemapping-toolbox/assets/css/slick.css' rel='stylesheet' type='text/css'>
    <link href='/influencemapping-toolbox/assets/css/slick-theme.css' rel='stylesheet' type='text/css'>
    <link href="/influencemapping-toolbox/assets/css/style.css" rel='stylesheet' type='text/css'>
    <!--[if (!IE)|(gte IE 8)]><!-->
      <link href="/influencemapping-toolbox/assets/css/visualsearch-datauri.css" media="screen" rel="stylesheet" type="text/css" />
    <!--<![endif]-->
    <!--[if lte IE 7]><!-->
      <link href="/influencemapping-toolbox/assets/css/visualsearch.css" media="screen" rel="stylesheet" type="text/css" />
    <!--<![endif]-->
    <link rel="shortcut icon" href="/influencemapping-toolbox/assets/images/opennews-favicon.ico">
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse"
        data-target="#mainmenu">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/influencemapping-toolbox/">
        <span><img src="/influencemapping-toolbox/assets/images/opennews-favicon.ico"></span>
        Toolbox <span style="color:red;">(Beta)</span>
      </a>
    </div>

    <div class="collapse navbar-collapse" id="mainmenu">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/influencemapping-toolbox/practices.html">Practices</a></li>
        <li><a href="/influencemapping-toolbox/projects.html">Projects</a></li>
        <li><a href="/influencemapping-toolbox/tools.html">Tools</a></li>
        <li><a href="/influencemapping-toolbox/case_studies.html">Case Studies</a></li>
        <li><a href="/influencemapping-toolbox/about.html">About</a></li>
      </ul>
    </div>
  </div>
</nav>

    
    
    <div id="page">
        <div class="container" id="main">
          <div class="row">
          
<h1 id="search-tools">Search Tools</h1>

<div class="row small">
  <div class="col-md-12" role="main">
    <div class="form-group">
      <div>
        <label class="sr-only" for="searchbox">Search</label>
        <input type="text" class="form-control" id="searchbox" placeholder="Search &hellip;">
        <span class="glyphicon glyphicon-search search-icon"></span>
      </div>
    </div>
  </div>
<!--  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="tool_features">
      <legend>Tool Features</legend>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Data Modeling</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Bulk Upload</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Displays Lists</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Network Viz</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Network Editing</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Network Analysis</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Embeddable</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Document Viz</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Timelines</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_maps" type="checkbox" value="Yes">
            <span>Maps</span>
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="tool_features_development" type="checkbox" value="Yes">
            <span>Development</span>
          </label>
        </div>
      </fieldset>
    </div>  
  </div>-->
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="feature_multicriteria">
      <legend>Tool Features</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="practice_criteria">
        <legend>Practice</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="usage_audience_criteria">
        <legend>Usage Audience</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="deployment_criteria">
        <legend>Deployment</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="installation_audience_criteria">
        <legend>Installation Audience</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="open_source_criteria">
        <legend>Open Source</legend>
      </fieldset>
    </div>  
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <fieldset id="programming_language_criteria">
        <legend>Programming Language</legend>
      </fieldset>
    </div>  
  </div>
</div>
<div class="row">
  <div class="col-md-12" role="main">
    <table class="table table-striped">
      <caption id="total_results" class="small"></caption>
      <thead><td><strong>Name</strong></td><td><strong>Description</strong></td></thead>
      <tbody class="search-results" id="results"></tbody>
    </table>
  </div>
</div>
<script id="result-template" type="text/html">
<tr>  
  <td><a href="<%= path %>"><%= name %></a></td>
  <td><%= description %></td>
</tr>
</script>

          </div>
        </div>
    </div>
    <hr>
    <footer class="hidden-print">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
          </div>
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <ul class="list-inline text-center">
                  <li>
                      <a href="https://github.com/iilab/influencemapping-toolbox">
                          <span class="fa-stack fa-lg">
                              <i class="fa fa-circle fa-stack-2x"></i>
                              <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                          </span>
                      </a>
                  </li>
              </ul>
          </div>
          <div class="col-md-12">
            <p class="copyright text-muted">Notice any omissions or problems in the content? Let us know at influencemapping [at] iilab [dot] org</p>
          </div>
        </div>
      </div>
    </footer>

    <script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://stats.iilab.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 6]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
    g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="http://stats.iilab.org/piwik.php?idsite=6" style="border:0;" alt="" /></p></noscript>
    <script src="/influencemapping-toolbox/assets/js/dependencies.js"></script>
    <script src="/influencemapping-toolbox/assets/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="/influencemapping-toolbox/assets/js/bootstrap.min.js"></script>
    <script src="/influencemapping-toolbox/assets/js/clean-blog.min.js"></script>
    <script src="/influencemapping-toolbox/assets/js/lunr.min.js"></script>
    <script src="/influencemapping-toolbox/assets/js/nunjucks.min.js"></script>
    <!--<script src="/influencemapping-toolbox/assets/js/visualsearch.js"></script>-->
    <script src="/influencemapping-toolbox/assets/js/filter.js"></script>
    <script src="/influencemapping-toolbox/assets/js/anchor.min.js"></script>
    <script src="/influencemapping-toolbox/assets/js/slick.min.js"></script>
    
<script type="text/javascript">
$( document ).ready(function($) {

    nunjucks.configure('assets/templates', { autoescape: true });
    initFacets();

    var tags,
        index,
        store = $.getJSON("searchMeta.json"),
        data = $.getJSON("searchIndex.json"),
        meta = {},
        res = {},
        multiCriteria = ["feature"];

    data.then(function(data) {
      store.then(function(store) {

        tags = _.chain(store)
          .reduce(function(memo, val) {
              if (val.tags) memo.push(val.tags);
              return memo;
            }, [])
          .unique()
          .value();

        meta = _.reduce(store, function(memo, val) {
              var cur = val;
              _.chain(val)
                .keys(val)
                .filter(function(v){return (cur[v]!="" && v!="name" && v!="description" && v!="keywords" && v!="tags");})
                .each(function(v,k, l) {
                  if (!memo[v]) memo[v] = [] 
                  memo[v].push(cur[v])
                })
                .value();
              return memo;
            }, [])

        _.chain(meta)
          .keys()
          .filter(function(k){return (k.lastIndexOf("feature_",0) !== 0)})
          .each(function(k){
            meta[k] = _.unique(meta[k]);
            if (k!="content_type")
            _.each(meta[k], function(v) {
              $('#' + k + '_criteria').append(
                '<div class="checkbox">' +
                ' <label>' +
                '    <input type="checkbox" value="' + v + '">' +
                '    <span>' + v +'</span>' + 
                '  </label>' +
                '</div>');
            });
          })
        // Deal with multicolumn criteria 

        _.each(multiCriteria, function(mc) {
          _.chain(meta)
           .keys()
           .filter(function(k){return (k.lastIndexOf(mc,0) === 0)})
           .each(function(k){
              $('#' + mc + '_multicriteria').append(
                '<div id="' + k + '_criteria" class="checkbox">' +
                ' <label>' +
                '    <input type="checkbox" value="Yes">' +
                '    <span>' + makeTitle(k.replace(mc + '_','')) +'</span>' + 
                '  </label>' +
                '</div>');
            })
        })

        var ks = _.keys(store);
        var results = _.chain(ks)
                       .filter(function(k){ return (store[k].content_type=="tool" && store[k].published!="No")})
                       .map(function(k) {
                         // add store key of object as path key of array object
                         var ret = _.extend( { path: k.replace(".md", ".html") } , store[k] );
                         return ret;
                       })
                       .value()

        var FJS = FilterJS(results, '#results', {
          template: '#result-template',
          search: {ele: '#searchbox'},
          //search: {ele: '#searchbox', fields: ['runtime']}, // With specific fields
          callbacks: {
            afterAddRecords: function(records){
              $('#total_results').text('Found : ' + records.length);

              updateCounts(meta, records);

            },
            afterFilter: function(result){
              if(!result.length){
                 $('#total_results').text("No results found");
              }
              else
              {
                  $('#total_results').text('Found : ' + result.length);
              }

              updateCounts(meta, result);

            }
          }
          //appendToContainer: appendToContainer
        });

        FJS.addCriteria({field: 'content_type', ele: '#content_type_criteria input:checkbox'});

//        FJS.addCriteria({field: 'library', ele: '#tool_features_library'});
//        FJS.addCriteria({field: 'maps', ele: '#tool_features_maps'});

        _.chain(meta)
         .keys()
         .filter(function(k){ return _.any(multiCriteria, function(mc) {return (k.lastIndexOf(mc + '_',0) !== 0)}) })
         .each(function(k){
            FJS.addCriteria({field: k, ele: '#' + k + '_criteria input:checkbox'});
          })

        // Deal with multicolumn criteria 

        _.each(multiCriteria, function(mc) {
          _.chain(meta)
           .keys()
           .filter(function(k){return (k.lastIndexOf(mc,0) === 0)})
           .each(function(k){
              FJS.addCriteria({field: k, ele: '#' + k + '_criteria input'});
            })
        })


      })
    })
/*
    data.then(function(data){
        // create index
        index = lunr.Index.load(data)
        store.then(function(store) {
          var array = $.map(store, function(value, index) {
              return [$.extend({},value, {ref: index})];
          });
          results_store = prepareResults(array,store)
          res = renderResults(results_store)
        });

        $('.search-results').empty().append( res.nb ?
          res.html : $('<p><strong>No results found</strong></p>')
        );

        $('.total-results').text(res.nb);

    });
*/
  
  function updateCounts(meta, res) {
  _.chain(meta)
   .keys()
   .filter(function(k){ return _.any(multiCriteria, function(mc) {return (k.lastIndexOf(mc + '_',0) !== 0)}) })
   .each(function(k){
      var checkboxes  = $('#' + k + '_criteria :input');
      var qResult = JsonQuery(res);

      checkboxes.each(function(){
        var c = $(this)
        var q = {};
        q[k] = c.val();
        var count = qResult.where(q).count;
        c.next().text(c.val() + ' (' + count + ')')
      });
    })

    _.each(multiCriteria, function(mc) {
      _.chain(meta)
       .keys()
       .filter(function(k){return (k.lastIndexOf(mc,0) === 0)})
       .each(function(k){
          var checkboxes  = $('#' + k + '_criteria :input');
          var qResult = JsonQuery(res);

          checkboxes.each(function(){
            var c = $(this)
            var q = {};
            q[k] = c.val();
            var count = qResult.where(q).count;
            c.next().text(makeTitle(k.replace(mc + '_','')) + ' (' + count + ')')
          });
        })
    })
  }

});

function prepareResults(results, store) {
    var results_store = results
    .map(function(result){
      return $.extend({}, store[result.ref], { path : result.ref.replace(".md", ".html"), score: result.score });
    })
    .sort(function (a, b) {
      return b.score - a.score
    })

    return results_store;
}

function renderResults(results) {
  return {
    results: results,
    html: nunjucks.render('results.html', { results: results }),
    nb: results.length
  }
}

function initFacets(){
  $('#content_type_criteria :checkbox').prop('checked', true);
  $('#content_type_audience').on('click', function(){
    $('#content_type_criteria :checkbox').prop('checked', $(this).is(':checked'));
  });

}

function makeTitle(slug) {
    var words = slug.split('_');

    for(var i = 0; i < words.length; i++) {
      var word = words[i];
      words[i] = word.charAt(0).toUpperCase() + word.slice(1);
    }

    return words.join(' ');
}

</script>

  </body>
</html>
